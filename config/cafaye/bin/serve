#!/usr/bin/env bash
set -euo pipefail

port="${1:-8000}"
if ! [[ "$port" =~ ^[0-9]+$ ]]; then
  echo "Port must be numeric." >&2
  exit 1
fi

if command -v python3 >/dev/null 2>&1; then
  echo "Serving $(pwd) at http://localhost:$port"
  exec python3 -m http.server "$port"
fi

echo "python3 is required for serve." >&2
exit 1
