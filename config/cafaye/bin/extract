#!/usr/bin/env bash
set -euo pipefail

if [[ $# -ne 1 ]]; then
  echo "Usage: extract <archive>" >&2
  exit 1
fi

archive="$1"
if [[ ! -f "$archive" ]]; then
  echo "File not found: $archive" >&2
  exit 1
fi

case "$archive" in
  *.tar.bz2|*.tbz2) tar xjf "$archive" ;;
  *.tar.gz|*.tgz) tar xzf "$archive" ;;
  *.tar.xz) tar xJf "$archive" ;;
  *.tar) tar xf "$archive" ;;
  *.bz2) bunzip2 "$archive" ;;
  *.gz) gunzip "$archive" ;;
  *.zip) unzip "$archive" ;;
  *.7z) 7z x "$archive" ;;
  *.rar) unrar x "$archive" ;;
  *)
    echo "Unsupported archive type: $archive" >&2
    exit 1
    ;;
esac
